<!doctype html>
<html itemscope itemtype="http://schema.org/Article">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="author" content="Paul Lewis" />
  <meta name="viewport" content="width=device-width">
  <meta name="theme-color" content="#880043">

  
  <link rel="alternate" type="application/rss+xml" title="RSS" href="//aerotwist.com/blog/feed/">
  

  
  <meta name="twitter:site" content="@aerotwist">
  <meta name="twitter:creator" content="@aerotwist">
  <meta name="twitter:title" content="The Cost of Frameworks">
  <meta name="twitter:description" content="I recently delivered a talk at FFConf in Brighton, called &quot;You should use &amp;lt;insert library / framework here&amp;gt;, it&#39;s the bestestest!&quot;. I wanted to do a write-up of the presentation&#39;s content here, hopefully so it can start a broader conversation that I think we need to have, mainly around the cost of modern frameworks on mobile devices.">

  <meta itemprop="name" content="The Cost of Frameworks">
  <meta itemprop="description" content="I recently delivered a talk at FFConf in Brighton, called &quot;You should use &amp;lt;insert library / framework here&amp;gt;, it&#39;s the bestestest!&quot;. I wanted to do a write-up of the presentation&#39;s content here, hopefully so it can start a broader conversation that I think we need to have, mainly around the cost of modern frameworks on mobile devices.">

    
    <meta itemprop="image" content="https://aerotwist.com/static/blog/the-cost-of-frameworks/chart.jpg">

    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://aerotwist.com/static/blog/the-cost-of-frameworks/chart.jpg">
    

  

  <style>
    
    @font-face {
      font-family: 'Lato';
      font-style: normal;
      font-weight: 400;
      font-display: block;
      src: local('Lato Regular'), local('Lato-Regular'), url(//themes.googleusercontent.com/static/fonts/lato/v7/qIIYRU-oROkIk8vfvxw6QvesZW2xOQ-xsNqO47m55DA.woff) format('woff');
    }
    

    @font-face {
      font-family: 'Lato';
      font-style: normal;
      font-weight: 700;
      font-display: block;
      src: local('Lato Bold'), local('Lato-Bold'), url(//themes.googleusercontent.com/static/fonts/lato/v7/qdgUG4U09HnJwhYI-uK18wLUuEpTyoUstqEm5AMlJo4.woff) format('woff');
    }
  </style>

  <link rel="stylesheet" media="screen" href="/css/aerotwist.css" />
  <title>Aerotwist - The Cost of Frameworks</title>
  

  
</head>


<!--
                              __          .__          __
  _____    ___________  _____/  |___  _  _|__| _______/  |_
  \__  \ _/ __ \_  __ \/  _ \   __\ \/ \/ /  |/  ___/\   __\
   / __ \\  ___/|  | \(  <_> )  |  \     /|  |\___ \  |  |
  (____  /\___  >__|   \____/|__|   \/\_/ |__/____  > |__|
       \/     \/                                  \/

  Giant ascii art embedded in every page of your site is how you
  show other people that YOU CARE. Mainly I care about developers,
  which is what I presume you are if you're all about viewing
  the source. Clearly you're my kind of person.

  This is v3, it's run through Jekyll, it's been fun to build,
  there's always more to do, and you may notice that aside from
  a little snow effect in December there is no JavaScript. None.

  That's one way of many you keep your pages fast. I care about
  keeping this site fast because your time is precious and I need
  to get out of your way.

  <3'z

  Paul
-->


  <body class="blog">

    <header>
      <div class="container">
        <div id="logo">
  <a href="/">
    <svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
       width="100%" height="100%">
    <g>
      <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#6EBAD3" points="30.6,47.73 64.92,47.73 19.97,76.52"></polygon>
      <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#ED95C0" points="48.198,0 53.008,14.06 39.31,24.76"></polygon>
      <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#880043" points="39.31,24.76 64.92,48 30.6,48"></polygon>
      <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#DA0A7A" points="39.31,24.76 64.92,48 53.008,14.06"></polygon>
      <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#0B7DAD" points="30.6,48 64.92,48 48,58.69"></polygon>
      <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#BDDEE8" points="47.76,58.69 64.92,47.73 75.14,76.73"></polygon>
    </g>
    </svg>
  </a>
</div>

        <nav>
  <ul>
    
      
        <li><a href="/">Home</a></li>
      
    
      
        <li class="active"><a href="/blog/"> Blog</a></li>
      
    
      
        <li><a href="/tutorials/">Tutorials</a></li>
      
    
      
        <li><a href="/lab/">Lab</a></li>
      
    
  </ul>

  <svg id="left-line" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
       width="380px" height="380px" viewBox="0 0 380 380">
    <line x1="0" y1="380" x2="380" y2="0" stroke="#AAAAAA" stroke-width="1" />
    </svg>

  <svg id="right-line" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
       width="380px" height="380px" viewBox="0 0 380 380">
    <line x1="0" y1="380" x2="380" y2="0" stroke="#6EBAD3" stroke-opacity="0.3" stroke-width="1" />
    </svg>
</nav>

      </div>
    </header>
    <section>

      <div class="content">

  
  <svg version="1.1" class="shape-reference" xmlns="http://www.w3.org/2000/svg" width="514" height="311">
  <defs>
    <filter id="blur-8">
      <feGaussianBlur in="SourceGraphic" stdDeviation="8" />
    </filter>
    <filter id="blur-6">
      <feGaussianBlur in="SourceGraphic" stdDeviation="6" />
    </filter>
    <filter id="blur-4">
      <feGaussianBlur in="SourceGraphic" stdDeviation="4" />
    </filter>
  </defs>

  <g id="color-block">
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#92a1c6" stroke="#92a1c6" stroke-width="0.6" points="92,161 40,91 93,88"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#8077af" stroke="#8077af" stroke-width="0.6" points="92,161 93,88 105,163"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#997bb4" stroke="#997bb4" stroke-width="0.6" points="147,134 105,163 93,88"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#8e4899" stroke="#8e4899" stroke-width="0.6" points="105,163 147,134 156,169"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#6b3c7a" stroke="#6b3c7a" stroke-width="0.6" points="123,206 105,163 156,169"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#712a68" stroke="#712a68" stroke-width="0.6" points="191,197 123,206 156,169"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#4d1d48" stroke="#4d1d48" stroke-width="0.6" points="191,197 148,244 123,206"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#3e1031" stroke="#3e1031" stroke-width="0.6" points="189,253 148,244 191,197"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#5f0f40" stroke="#5f0f40" stroke-width="0.6" points="189,253 191,197 231,201"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#4e0730" stroke="#4e0730" stroke-width="0.6" points="189,253 231,201 244,237"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#6e033a" stroke="#6e033a" stroke-width="0.6" points="244,237 231,201 264,219"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#3c0220" stroke="#3c0220" stroke-width="0.6" points="244,237 264,219 303,271"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#4d0830" stroke="#4d0830" stroke-width="0.6" points="303,271 264,219 317,201"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#34102c" stroke="#34102c" stroke-width="0.6" points="413,236 303,271 317,201"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#562757" stroke="#562757" stroke-width="0.6" points="413,236 317,201 384,175"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#3f3f67" stroke="#3f3f67" stroke-width="0.6" points="413,236 384,175 474,182"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#615592" stroke="#615592" stroke-width="0.6" points="384,175 387,141 474,182"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#994095" stroke="#994095" stroke-width="0.6" points="384,175 321,153 387,141"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#912977" stroke="#912977" stroke-width="0.6" points="317,201 321,153 384,175"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#b5207f" stroke="#b5207f" stroke-width="0.6" points="317,201 311,144 321,153"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#9c1162" stroke="#9c1162" stroke-width="0.6" points="264,219 311,144 317,201"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#cc066d" stroke="#cc066d" stroke-width="0.6" points="311,144 264,219 233,159"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#f52692" stroke="#f52692" stroke-width="0.6" points="265,117 311,144 233,159"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#e348a1" stroke="#e348a1" stroke-width="0.6" points="311,144 265,117 309,131"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#d14fa3" stroke="#d14fa3" stroke-width="0.6" points="311,144 309,131 331,122"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#cb439c" stroke="#cb439c" stroke-width="0.6" points="321,153 311,144 331,122"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#b752a2" stroke="#b752a2" stroke-width="0.6" points="321,153 331,122 387,141"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#ea75b8" stroke="#ea75b8" stroke-width="0.6" points="309,131 265,117 312,77"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#f6a4d0" stroke="#f6a4d0" stroke-width="0.6" points="265,117 271,55 312,77"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#fea8d3" stroke="#fea8d3" stroke-width="0.6" points="265,117 246,67 271,55"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#fc79bb" stroke="#fc79bb" stroke-width="0.6" points="240,121 246,67 265,117"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#f4a3d0" stroke="#f4a3d0" stroke-width="0.6" points="240,121 196,66 246,67"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#e682be" stroke="#e682be" stroke-width="0.6" points="187,124 196,66 240,121"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#dca1cc" stroke="#dca1cc" stroke-width="0.6" points="187,124 141,88 196,66"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#c37eb9" stroke="#c37eb9" stroke-width="0.6" points="147,134 141,88 187,124"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#bc9dc7" stroke="#bc9dc7" stroke-width="0.6" points="147,134 93,88 141,88"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#d2c9df" stroke="#d2c9df" stroke-width="0.6" points="93,88 95,55 141,88"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#c6cde1" stroke="#c6cde1" stroke-width="0.6" points="93,88 40,91 95,55"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#eadcec" stroke="#eadcec" stroke-width="0.6" points="141,88 95,55 178,40"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#eed4e8" stroke="#eed4e8" stroke-width="0.6" points="141,88 178,40 196,66"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#f8e6f2" stroke="#f8e6f2" stroke-width="0.6" points="196,66 178,40 212,54"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#f8d2e8" stroke="#f8d2e8" stroke-width="0.6" points="246,67 196,66 212,54"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#fdd7eb" stroke="#fdd7eb" stroke-width="0.6" points="246,67 212,54 271,55"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#b14e9f" stroke="#b14e9f" stroke-width="0.6" points="156,169 147,134 187,124"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#bc3493" stroke="#bc3493" stroke-width="0.6" points="156,169 187,124 205,159"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#9b2476" stroke="#9b2476" stroke-width="0.6" points="191,197 156,169 205,159"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#9d1566" stroke="#9d1566" stroke-width="0.6" points="191,197 205,159 231,201"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#be1172" stroke="#be1172" stroke-width="0.6" points="231,201 205,159 233,159"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#a20658" stroke="#a20658" stroke-width="0.6" points="231,201 233,159 264,219"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#e4248e" stroke="#e4248e" stroke-width="0.6" points="233,159 205,159 240,121"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#f7379a" stroke="#f7379a" stroke-width="0.6" points="265,117 233,159 240,121"/>
    <polygon fill-rule="evenodd" clip-rule="evenodd" fill="#db459e" stroke="#db459e" stroke-width="0.6" points="205,159 187,124 240,121"/>
  </g>
</svg>

  

  <div class="masthead hatched">

    
      <svg class="behind-meta" width="514" height="311">
        <use xlink:href="#color-block" />
      </svg>

      <svg class="left-meta" width="514" height="311">
        <use xlink:href="#color-block" filter="url(#blur-6)" transform="translate(257 155) scale(-0.5 0.5) translate(-257 -156)" />
      </svg>
    

    <div class="container">
      <h2>The Cost of Frameworks</h2>
      <p>I recently delivered a talk at <a href="http://2015.ffconf.org">FFConf</a> in Brighton, called "You should use &lt;insert library / framework here&gt;, it's the bestestest!". I wanted to do a write-up of the presentation's content here, hopefully so it can start a broader conversation that I think we need to have, mainly around the cost of modern frameworks on mobile devices.</p>
    </div>

  </div>

  <div class="container">
    <div class="meta">

      <ul>
        <li class="last-updated">
          <span class="name">Last updated:</span>
          <span class="value">16 Nov 2015</span>
        </li>

        <li>
          <span class="name">Est. Read Time:</span>
          <span class="value">14 mins</span>
        </li>

        <li class="share">
          <span class="name">Share this:</span>
          <span class="value"><a href="http://www.twitter.com/share?url=https://aerotwist.com/blog/the-cost-of-frameworks/&text=The Cost of Frameworks">Twitter</a></span>
          <span class="value"><a href="https://plus.google.com/share?url=https://aerotwist.com/blog/the-cost-of-frameworks/">Google+</a></span>
        </li>
        <li class="tags">
          <span class="name">Tagged:</span>
          <span class="value">
          
            #frameworks, 
          
            #perf
          
          </span>
        </li>

        <!-- <li class="offline">
          <button data-target="/blog/the-cost-of-frameworks">Take offline</button>
        </li> -->
      </ul>
    </div>
  </div>

  <div class="container"><div class="left column">

<p><strong>Update: Nov 16th 2015 - Added an extra row in the table for React under production conditions. The good news: it’s 3x slower than vanilla, yes, but in actual terms I’d say it’s fast for TodoMVC! The Polymer TodoMVC sample was also updated to version 1.2.2 today, and that, too, is faster.</strong></p>

<p>If you prefer watching to reading, here’s the video of the talk (you can also <a href="https://speakerdeck.com/paullewis/framework-here-its-the-bestestest">get the slides</a>, too, if you like):</p>

<iframe width="100%" height="420" src="//www.youtube.com/embed/_yCz1TA0EL4?vq=hd720" frameborder="0" allowfullscreen="allowfullscreen" style="margin-bottom: 20px; box-shadow: 0 2px 2px rgba(0,0,0,0.3)">
</iframe>

<p>If you prefer reading to watching, well, keep reading…</p>

<h2 id="the-benefits-of-frameworks">The benefits of frameworks</h2>

<p>Earlier in the year I wrote about <a href="../react-plus-performance-equals-what/">React’s performance characteristics</a> as the tree size it has to manage gets larger (TL;DR the bigger the tree, the more computation work it has to do). The responses I got to that post really varied, from appreciative and constructive to, well, the other end of the spectrum. The responses gave me some additional insight, though, which I think applies to all frameworks (to a greater or lesser extent), and which I’ll now try and summarize:</p>

<ul>
  <li><strong>Frameworks are fun to use</strong>. I don’t think I know any developer who actively seeks out a more challenging and less fun experience! And yes, absolutely, ergonomics <em>are</em> important.</li>
  <li><strong>Frameworks make it quicker to build an MVP</strong>. This one is important, particularly for smaller, fledgling organizations or companies. Having a fast bootstrap may be the difference between shipping and not shipping.</li>
  <li><strong>Frameworks work around lumps / bugs in the platform</strong>. I think this is less of an issue these days (though not irrelevant) as browsers have rallied around standards very well in the past few years. Certainly this is less painful compared to my early career, where we were dealing with IEs 5 and 6, and early versions of Firefox, Safari and, of course, Chrome.</li>
  <li><strong>Knowing [insert framework] means I get paid.</strong> If you’re looking to get hired, saying that you know the latest and greatest framework(s) may be the difference maker.</li>
</ul>

<blockquote>
  <p>The key message I heard over and over, sometimes explicitly, and often implicitly, is that ergonomics are the most important factor for many developers.</p>
</blockquote>

<p>The key message I heard over and over, sometimes explicitly, and often implicitly, is that ergonomics are <em>the most important factor</em> for many developers. If I can paraphrase, the sentiment was “if I have an easier time I’ll build something better for my users”. At face value that sounds appealing, but I think it misses a lot of important points.</p>

<h2 id="developer-ergonomics-vs-user-needs">Developer Ergonomics vs User Needs</h2>

<p>Users have needs, too, though. Here are a few of them that come to mind:</p>

<ul>
  <li><strong>Sites and apps should load quickly.</strong></li>
  <li><strong>They should have smooth interactions.</strong></li>
  <li><strong>They shouldn’t slow down my phone.</strong></li>
  <li><strong>They shouldn’t crash.</strong></li>
  <li><strong>They should have features I want.</strong></li>
</ul>

<p>So immediately we’re into a potential trade-off situation: on the one hand we have our convenience, our ergonomics, and on the other hand we have our users’ needs. And we have to trade, whether we like it or not, since frameworks aren’t free.</p>

<h2 id="a-quick-side-step">A quick side step</h2>

<p>At this point I’m going to park libraries, and leave them out of this discussion. The reason is that, in my view at least, libraries can be swapped out and replaced if they prove problematic. Don’t like the way a library does date formatting? No problem, just switch it for something else. Frameworks, on the other hand, tend to be a lot more difficult to swap, often requiring a rebuild of the app in question. And, by their nature, they’re a lot bigger and more involved.</p>

<h2 id="the-cost-of-code">The cost of code</h2>

<p>All code has costs, but I think there are particular costs that are unique to frameworks.</p>

<figure>
  <img src="/static/blog/the-cost-of-frameworks/deprecated.jpg" alt="A deprecation warning." />
  <figcaption>That magical moment where an framework tells you something is deprecated. Apparently it was superseded by Java. Weird.</figcaption>
</figure>

<ul>
  <li><strong>Learning it.</strong> You have to take time out to learn any new framework: what it means to write “idiomatic” code for that framework; its patterns, practices, and ways of doing things. This is no different to the web platform itself. There’s no free ride, you’re just swapping one set of issues for another.</li>
  <li><strong>Re-learning it.</strong> One day you’re just bimbling along, developing your app, and in the console you see a warning telling you that there’s been a deprecation, and that you need to update your code. That often requires figuring out what the latest version of the framework needs you to do differently, and that may also mean updating projects that shipped with older versions of the framework.</li>
  <li><strong>Debugging it.</strong> Frameworks, like any software, have bugs. That’s to be expected, and it wouldn’t be any different if you went vanilla and wrote your own. Debugging a framework, however, often ranges from difficult to impossible. If you find the issue, you may have to keep your own frankensteined version around with a monkey patch applied until the real fix lands in the framework’s production build.</li>
</ul>

<p>Aside from the developer costs, there are costs to the user, too:</p>

<ul>
  <li><strong>Time.</strong> How long does it take to bootstrap the thing we sent down the wire?</li>
  <li><strong>Bandwidth.</strong> How much bandwidth does it use up?</li>
  <li><strong>CPU usage (battery).</strong> How CPU intensive is it? CPU utilization is going to correlate to battery usage: burn the CPU and the battery will get drained.</li>
  <li><strong>Frame rate.</strong> How well does the code update the screen? (We know that <a href="https://paul.kinlan.me/what-news-readers-want/">users like smooth interactions</a>.)</li>
  <li><strong>Memory usage.</strong> How much memory does it use? Will it cause other apps to be evicted from memory? Perhaps even crash a tab?</li>
</ul>

<h2 id="bringing-data-to-the-table">Bringing data to the table</h2>

<p>So with all that in mind, I wanted to start off a conversation about measuring some of those costs, and my hope is that together we can build up more of a picture about the trade-offs we choose to make.</p>

<p>I decided to take a look at the bootstrapping time for frameworks on mobile. The theory being that, given a like-for-like app, one should be able to see how long it takes each framework to boot. I opted to use <strong>TodoMVC</strong> for the test, because in my view it’s an MVP web app, and from a user’s point of view, each variant is functionally identical.</p>

<figure>
  <img src="/static/blog/the-cost-of-frameworks/todomvc.jpg" alt="TodoMVC." />
  <figcaption>TodoMVC: source of my bootstrapping test.</figcaption>
</figure>

<h3 id="bootstrapping--time-to-interactive">Bootstrapping / Time-to-interactive</h3>

<p>Of the costs listed above, I decided to take a look at the <strong>Time</strong>, <strong>Bandwidth</strong>, and <strong>CPU usage</strong> for booting up some frameworks on a Nexus 5 and iPhone 5S.</p>

<figure>
  <img src="/static/blog/the-cost-of-frameworks/time-to-interactive.jpg" alt="Measuring time to interactive." />
  <figcaption>Time to interactive: measuring how long it takes for an app to get to a state where someone can interact with it.</figcaption>
</figure>

<p>I decided to measure the time it takes to <strong>evaluate and execute each framework’s initial payload of JavaScript</strong>, and the processing and setup of the initial data set into a model. I decided to ignore the cost of styles, layout, paint and so on since they shouldn’t vary all that much between the different TodoMVC implementations. I was also not testing transfer time.</p>

<h3 id="methodology">Methodology</h3>

<p>I used <a href="https://webpagetest.org">WebPagetest</a> to load the pages on a Nexus 5, and I requested a timeline file for each run, which I then passed to <a href="../bigrig/">Big Rig</a> for processing. The iPhone results I did myself, and had to tally up manually, because unfortunately Safari’s JavaScript profiling doesn’t seem to support any timeline / trace file export.</p>

<figure>
  <img src="/static/blog/the-cost-of-frameworks/bigrig.jpg" alt="Using Big Rig to measure TodoMVC bootup time." />
  <figcaption>Using Big Rig to quickly assess the TodoMVC bootup time per framework.</figcaption>
</figure>

<p>This, incidentally, is why I built <a href="../bigrig">Big Rig</a>. I wanted to make it easier for all of us to start processing this kind of data quickly.</p>

<h3 id="repeating-the-test">Repeating the test</h3>

<p>If you want to do your own test like this, at least for a device running Chrome, you should do the following:</p>

<ul>
  <li>Install the Big Rig CLI: <code>npm install -g bigrig</code>.</li>
  <li>Go to <a href="http://webpagetest.org">WebPagetest</a>.</li>
  <li>Set the location to Dulles.</li>
  <li>Set the browser to Nexus 5 - Chrome (or Beta/Dev).</li>
  <li>Under the Chrome settings, check “Capture Dev Tools Timeline”.</li>
  <li>Run the test.</li>
  <li>Download the Timeline file on the left hand side of the results.</li>
  <li>Run <code>bigrig --file /path/to/timeline.json --pretty-print</code>.</li>
</ul>

<p>If you prefer, you can watch me getting a Timeline file from WebPagetest:</p>

<iframe width="100%" height="420" src="//www.youtube.com/embed/LFOCkLqPklg?vq=hd720" frameborder="0" allowfullscreen="allowfullscreen" style="margin-bottom: 20px; box-shadow: 0 2px 2px rgba(0,0,0,0.3)">
</iframe>

<h2 id="the-results">The results</h2>

<p>Here’s how the various frameworks stacked up in my tests:</p>

<table class="left-highlight">
  <thead>
    <tr>
      <th>Framework</th>
      <th>Size</th>
      <th>Bootstrap time N5<sup>1,3</sup></th>
      <th>Bootstrap time iPhone 5S<sup>2,3</sup></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Polymer v1.1.4</td>
      <td>41KB<sup>5</sup></td>
      <td>409ms</td>
      <td>233ms</td>
    </tr>
    <tr>
      <td>Polymer v1.2.2</td>
      <td>47KB<sup>5</sup></td>
      <td>155ms</td>
      <td>232ms</td>
    </tr>
    <tr>
      <td>AngularJS v1.4.3</td>
      <td>324KB</td>
      <td>518ms</td>
      <td>307ms</td>
    </tr>
    <tr>
      <td>React v0.13.3 [JSX not transformed]</td>
      <td>311KB</td>
      <td>1,201ms</td>
      <td>1,463ms</td>
    </tr>
    <tr>
      <td>React v0.13.3 [JSX transformed via Babel]<sup>4</sup></td>
      <td>162KB</td>
      <td>509ms</td>
      <td>282ms</td>
    </tr>
    <tr>
      <td>React v0.13.3 [JSX transformed; prod build]<sup>4, 6</sup></td>
      <td>160KB</td>
      <td>174ms</td>
      <td>118ms</td>
    </tr>
    <tr>
      <td>Backbone v1.2.2 [inc. jQuery &amp; Underscore]</td>
      <td>139KB</td>
      <td>248ms</td>
      <td>168ms</td>
    </tr>
    <tr>
      <td>Ember v1.10.0-beta.3</td>
      <td>580KB</td>
      <td>1,992ms</td>
      <td>1,440ms</td>
    </tr>
    <tr>
      <td>Vanilla</td>
      <td>16KB</td>
      <td>50ms</td>
      <td>33ms</td>
    </tr>
  </tbody>
</table>

<ol>
  <li>Tests done on a Nexus 5 running Chrome 47.</li>
  <li>Tests done on an iPhone 5S running Safari 9.</li>
  <li>All bootstrapping time includes handling initial todo list data.</li>
  <li>JS Transformer stripped; JSX files transformed via Babel.</li>
  <li>Excludes Web Components Polyfill (12KB).</li>
  <li>React switched for minified production build.</li>
</ol>

<p>For me the results are pretty clear: <strong>there appears to be a pretty hefty tax to using Frameworks on mobile, especially compared to writing vanilla JavaScript</strong>. The fastest is Polymer 1.2.2, which is awesome, but it’s still 3x slower than Vanilla. React is pretty similar to Polymer, but <a href="../react-plus-performance-equals-what/">I still have concerns over its scaling properties</a>.</p>

<p>To make things super clear, here are a couple of notes:</p>

<ul>
  <li><strong>TodoMVC doesn’t JSX Transform React, so I did.</strong> The reason there are three entries for React is that the TodoMVC example doesn’t transform JSX, and instead includes the JSX Transformer library. To make things fairer (because the runtime JSX transformation is expensive!), I made a more ‘productionized’ version of the example, and tested that, too. The downside is that it’s not the minified version of React, which is different again. So I also switched out the build of React for the production version, and that’s the third build in the table.</li>
  <li><strong>These times do <em>not</em> include transfer time.</strong> The only thing I was measuring was the time in JavaScript to bootstrap the framework and get the initial view built. In fact, <em>some of the frameworks in TodoMVC aren’t minified</em>. For a more discussion on framework transfer sizes, <a href="https://www.filamentgroup.com/lab/mv-initial-load-times.html">check out the Filament Group’s post from last year</a>.</li>
</ul>

<h3 id="possible-objections">Possible Objections</h3>

<p>I figure there’s likely to be some objections to the test, which are definitely worth talking through:</p>

<blockquote>
  <p>I’d argue your use-case is probably more expensive than TodoMVC.</p>
</blockquote>

<ul>
  <li><strong>“TodoMVC isn’t idiomatic.”</strong> I checked this one out, and from what I understand every implementation <em>is</em> idiomatic, and framework experts file PRs against them when they aren’t.</li>
  <li><strong>“TodoMVC isn’t my use-case.”</strong> That’s probably true, but I’d argue your use-case is probably <em>more</em> expensive than TodoMVC. <a href="https://github.com/reddit/reddit-mobile/issues/247">Paul Irish recently did a performance audit on Reddit’s mobile site</a>, and he discovered, amongst other things, that 22 seconds were going into just booting up React’s components on mobile!</li>
  <li><strong>“A Nexus 5 / iPhone 5S isn’t what our users use.”</strong> That’s also probably true. I have the privilege of using good hardware, and I would imagine that many people don’t have access to top end phones, so I’d expect these numbers to be even worse in those cases.</li>
  <li><strong>“It’ll be better in the next version of &lt;insert framework here&gt;.”</strong> This may well be true, but it doesn’t do much for anything you’ve shipped with the current version.</li>
</ul>

<h2 id="the-64k-question">The $64k question</h2>

<p>So, inevitably, the question comes: <em>“Should you use a framework?”</em></p>

<p>I can’t answer that question, because I think it’s entirely your call. There are a million and one reasons why you may feel you need to use one. But, for what it’s worth, here are my thoughts:</p>

<ul>
  <li><strong>Frameworks contribute ideas and concepts</strong>. Frameworks are a crucial part of understanding what approaches work, and what don’t, and that ultimately drives improvements at the platform level. In that regard I think they serve as important testing grounds for the platform changes of tomorrow and let us figure things out before they become embedded in the web permanently.</li>
  <li><strong>Frameworks are an inversion of control</strong>. The reason I parked libraries earlier on is that you can swap them out. Frameworks, on the other hand, invert control. <em>They</em> control the lifecycle of the app, and give <em>you</em> entry points where your code runs. You’re still responsible for the final code, but you’re not in control.</li>
  <li><strong>Frameworks are expensive on mobile</strong>. Compared to vanilla, at least. For me, prohibitively so, but everyone has their own limits of what they’re willing to tolerate.</li>
</ul>

<blockquote>
  <p>Investing in knowledge of the web platform itself is the best long-term bet.</p>
</blockquote>

<p>As I look at frameworks, I see the ergonomic benefits (and those are important, I agree!), but I can’t help but feel that, for many developers, <strong>investing in knowledge of the web platform itself is the best long-term bet</strong>. Frameworks come and go, it just seems to be the ebb and flow of the web, and, as I said above, they <em>do</em> contribute ideas and patterns. But if you ever find that the one you use no longer works for you, or has a bug that remains unfixed, being able to understand the platform that underpins it will help enormously.</p>

<h2 id="the-bigger-conversation">The bigger conversation</h2>

<p>When I wrote the post earlier in the year about React, I said this:</p>

<blockquote class="quote">
  <p>It seems to me that developer ergonomics should be less important than our users’ needs.</p>
</blockquote>

<p>I still believe that. As much as I love the idea of having an easier life, I don’t want to ship something to people that doesn’t run well, and I don’t want them to pay the cost. Today I’m concerned by the costs of booting up frameworks on mobile.</p>

<blockquote>
  <p>I’m concerned by the costs of booting up frameworks on mobile.</p>
</blockquote>

<p>This is only a first step. There are other metrics besides bootstrapping I’ve barely had chance to look into: memory usage, long-term CPU usage, and impact on frame rate to name three. Overall, I think we have more to do to properly assess the impact of code that we ship to our users and the costs we pass on to them.</p>

<p>If we can achieve fast-booting, low-memory, smooth-executing frameworks with good ergonomics we’ll be onto a winner. Until then, for mobile at least, I’ll be sticking to the vanilla web platform.</p>

</div></div>


  <div class="footer-share container">
    Share this on: <span class="value"><a href="http://www.twitter.com/share?url=https://aerotwist.com/blog/the-cost-of-frameworks/&text=The Cost of Frameworks">Twitter</a></span>
    <span class="value"><a href="https://plus.google.com/share?url=https://aerotwist.com/blog/the-cost-of-frameworks/">Google+</a></span>
  </div>

  <div class="clear"></div>

  
    <svg class="left-shape" style="margin-left: -295.45px" width="435.4" height="719.6">
      <use xlink:href="#color-block" filter="url(#blur-4)" transform="scale(-1.4 1.4) rotate(90)"/>
    </svg>

    <svg class="right-shape" width="155.5" height="462.6">
      <use xlink:href="#color-block" filter="url(#blur-8)" transform="scale(-0.9 0.9) rotate(90)"/>
    </svg>
  

</div>


    </section>

    <footer>

      <div class="container">
        <div class="bio panel">
          <h2>Hello!</h2>
          <p>My name is Paul. I work at <a href="http://www.google.com/" title="Yay Google!">Google</a> on the Chrome team as an engineer. I create sites & apps for the web.</p>

          <p>You can find me on <a href="http://twitter.com/aerotwist">Twitter</a> and <a href="http://www.google.com/+aerotwist">G+</a></p>
        </div>

        <div class="get-in-touch panel">
          <h2>Get in touch</h2>
          <p>I don’t bite. Honestly. You can find me on <a href="https://twitter.com/aerotwist">Twitter</a> and <a href="http://www.youtube.com/aerotwist">YouTube</a>, and I like hearing from people so say hi.</p>
        </div>

        <div class="subscribe panel">
          <h2>Subscribe</h2>
          <p>You should totally get the <a href="/blog/feed/">RSS feed</a>, or whatever it is you kids are using these days (I miss Reader.)</p>
        </div>

        <p class="disclaimer">Except as otherwise noted, the content of this page is licensed under the Creative Commons Attribution 3.0 License, and code samples are licensed under the Apache 2.0 License.</p>
      </div>
    </footer>

    <script async="true">

    /**
     * Snow effect, from: HTML5 Rocks
     * https://github.com/html5rocks/www.html5rocks.com/blob/9318b5755c8c17a4bd1761bca6b1b491e7fd17b8/content/index.html
     */
    !function(){function j(){f=c.clientWidth,g=c.clientHeight,d.width=f,d.height=g,e.fillStyle="#FFF";var a=i;i=f>600,!a&&i&&requestAnimFrame(n)}function n(){if(e.clearRect(0,0,f,g),i){for(h=0;b>h;h++)m=l[h],m.y+=m.vy,m.x+=m.vx,e.globalAlpha=m.o,e.beginPath(),e.arc(m.x,m.y,m.r,0,2*Math.PI,!1),e.closePath(),e.fill(),m.y>g&&m.reset();requestAnimFrame(n)}}var a=(new Date).getMonth();if(11===a){var b=100,c=document.querySelector(".masthead");if(c){var d=document.createElement("canvas"),e=d.getContext("2d"),f=c.clientWidth,g=c.clientHeight,h=0,i=!1,k=function(){this.x=0,this.y=0,this.vy=0,this.vx=0,this.r=0,this.reset()};k.prototype.reset=function(){this.x=Math.random()*f,this.y=Math.random()*-g,this.vy=1+3*Math.random(),this.vx=.5-Math.random(),this.r=1+2*Math.random(),this.o=.5+.5*Math.random()},d.style.position="absolute",d.style.left=d.style.top="0";var m,l=[];for(h=0;b>h;h++)m=new k,m.reset(),l.push(m);window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),j(),window.addEventListener("resize",j,!1),c.appendChild(d)}}

    if (new Date().getMonth() !== 11) {
      return;
    }

    if (!('IntersectionObserver' in window)) {
      return;
    }

    var masthead = document.querySelector('.masthead');
    if (!masthead) {
      return;
    }

    var observer = new IntersectionObserver(function(entries) {
      entries.sort(function(a, b) {
        return b.time - a.time;
      });

      var isActive = i;
      i = entries[0].intersectionRatio > 0.01;

      if (i && !isActive) {
        console.log('***** LET IT SNOWWWWW!!!! *****');
        requestAnimFrame(n);
      } else {
        if (i !== isActive) {
          console.log('Forecast: no snow.');
        }
      }

    }, { rootMargin: '0px', threshold: 0.01 });

    observer.observe(masthead);
    }();
    </script>
  </body>
</html>
